<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Chat</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #chat { border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: scroll; }
        #userInput { width: 80%; padding: 5px; }
        #sendBtn { padding: 5px 10px; }
        .message { margin: 5px 0; }
        .user { color: blue; }
        .ai { color: green; }
    </style>
</head>
<body>

<h1>AI Chat</h1>
<div id="chat"></div>
<input type="text" id="userInput" placeholder="Type your message..." />
<button id="sendBtn">Send</button>

<script>
const API_KEY = 'TgpGudR3iMVSiTqAwSt2oA'; // API key directly in the code
const chatDiv = document.getElementById('chat');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');

async function sendMessage(message) {
    // Display user's message
    chatDiv.innerHTML += `<div class="message user"><strong>You:</strong> ${message}</div>`;

    try {
        const response = await fetch('https://ai.portalsbase.com/api/generate', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer ' + API_KEY
            },
            body: JSON.stringify({ prompt: message })
        });

        const data = await response.json();
        const aiReply = data?.text || 'No response from AI';

        chatDiv.innerHTML += `<div class="message ai"><strong>AI:</strong> ${aiReply}</div>`;
        chatDiv.scrollTop = chatDiv.scrollHeight;

    } catch (err) {
        chatDiv.innerHTML += `<div class="message ai" style="color:red;"><strong>AI:</strong> Error: ${err.message}</div>`;
    }
}

sendBtn.addEventListener('click', () => {
    const message = userInput.value.trim();
    if (!message) return;
    sendMessage(message);
    userInput.value = '';
});

userInput.addEventListener('keypress', e => {
    if (e.key === 'Enter') sendBtn.click();
});
</script>

</body>
</html>
